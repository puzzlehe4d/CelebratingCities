
<ion-view view-title="Dashboard" class="content-main">

  <ion-content ng-show='!vm.loading' class='center'>
  
    <h4>Hubs near your location</h4>
    
    <div class='card' id="map" map-lazy-load="https://maps.google.com/maps/api/js" map-lazy-load-params="{{vm.googleMapsUrl}}">

      <ng-map default-style="true" center="{{vm.location}}" mapTypeControl='false' zoom="15" zoomControl='false' scaleControl='true' styles="{{vm.mapStyle}}" >
        <marker no-watcher="true"
      ng-repeat="p in vm.positions"
      draggable="false"
      position="{{p.lat}}, {{p.lng}}"
      title="{{p.address}}"></marker>
      <marker no-watcher="true"
        ng-repeat="crime in vm.crimes"
        draggable="false"
        position="{{crime.location_1.latitude}}, {{crime.location_1.longitude}}" icon="{path:'CIRCLE', scale: 2, fillColor: 'red',
          fillOpacity: 0.2, strokeOpacity: 0.4, strokeWeight: 0}"></marker>
      </ng-map>
       
    </div>
    <form id='findHubs' ng-submit="vm.findHubs()" >

    	<div class="form-group vertical">
      	<div class="input-group">
		      <input type="text" placeholder="Enter starting location" name="startAt" size="40" ng-model="vm.startAt"/>
		      <button type="button" class="geolocate" ng-click="vm.geolocate('start')"><span class="ion-icon ion-android-pin"></span></button>
		    </div>
	    </div>

		<div class="form-group vertical">
      	<div class="input-group">
		      <input type="text" placeholder="Enter destination" name="arriveAt" ng-model="vm.arriveAt"/>
		      <button type="button" class="geolocate" ng-click="vm.geolocate('arrive')"><span class="ion-icon ion-android-pin"></span></button>
		    </div>
	     </div>

       


	     <div class="form-group vertical">
	     	<button type="submit" class="button button-balanced button-block">Find a Hub</button>
	     </div>
    </form>
  </ion-content>
</ion-view>

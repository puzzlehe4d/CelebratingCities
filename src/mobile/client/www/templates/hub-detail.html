<!--
  This template loads for the 'tab.friend-detail' state (app.js)
  'friend' is a $scope variable created in the FriendsCtrl controller (controllers.js)
  The FriendsCtrl pulls data from the Friends service (service.js)
  The Friends service returns an array of friend data
-->
<ion-view view-title="{{hub.name}}">
  <ion-nav-bar side="left">
    <a class="button button-clear button-icon icon ion-chevron-left" ui-sref="tab.dash"></a>
  </ion-nav-bar>

  <ion-content class='center'>
    <div class='hub-detail'>
      <h4>{{vm.hub.name}}</h4>
      <strong>{{vm.hub.address}}</strong> to <strong>{{vm.hub.endPoint}}</strong><br>
      This hub will be departing at <strong>{{vm.hub.leaveTime | date: "HH:mm"}}</strong> and will take approximately <strong>{{vm.hub.duration}} minutes</strong> to travel <strong>{{vm.hub.distance}} miles</strong><br><br>
      Number of users who have favorited this hub: {{vm.hub.user_count}}<br>
      Number of ongoing rides: {{vm.hub.ride_count}}

      <div id="map" map-lazy-load="https://maps.google.com/maps/api/js" map-lazy-load-params="{{vm.googleMapsUrl}}" >
        <ng-map default-style="true" center="41,-87" zoom="3" styles="{{vm.mapStyle}}">
         
         <directions
           draggable="false"
           panel="directions-panel"
           travel-mode="DRIVING"
           origin="{{vm.hub.address}}"
           destination="{{vm.hub.endPoint}}">
         </directions>
          <marker no-watcher="true"
        ng-repeat="crime in vm.crimes"
        draggable="false"
        position="{{crime.lat}}, {{crime.lon}}" icon="{path:'CIRCLE', scale: 6, fillColor: 'red',
          fillOpacity: 0.3, strokeOpacity: 0.4, strokeWeight: 0}"></marker>
        </ng-map>
      </div>
      <button type='submit' ng-click='vm.joinHub()' class='button button-large button-balanced icon-left ion-android-favorite'>ADD TO MY HUBS</button>
      <button type='submit' ng-click='vm.navToRequest()' class='button button-large button-balanced icon-left ion-android-navigate'>REQUEST RIDE</button>
      <button type='submit' ng-click='vm.navToJoinRide()' class='button button-large button-balanced icon-left ion-android-navigate'>JOIN A RIDE</button>
    </div>
  </ion-content>
</ion-view>
